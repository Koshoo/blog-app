(this["webpackJsonpbloglist-frontend-redux-from-scratch"]=this["webpackJsonpbloglist-frontend-redux-from-scratch"]||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),l=n(20),u=n.n(l),o=n(6),i=n(25),s=n(63),m=n(64),d=n(71),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return t.data;case"LIKE_BLOG":return e.map((function(e){return e.id===t.data.id?t.data:e}));case"REMOVE_BLOG":return e.filter((function(e){return e.id!==t.data.id}));case"NEW_BLOG":return[].concat(Object(d.a)(e),[t.data]);case"NEW_COMMENT":var n=t.data;return e.map((function(e){return e.id===n.id?n:e}));default:return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return null;default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.data;case"CLEAR_NOTIFICATION":return null;default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;default:return e}},v=Object(i.combineReducers)({blogs:f,user:p,notification:E,users:b}),h=Object(i.createStore)(v,Object(m.composeWithDevTools)(Object(i.applyMiddleware)(s.a))),g=n(50),O=n(5),y=n.n(O),w=n(8),j=n(18),k=n.n(j),x=function(e){return localStorage.setItem("loggedBlogAppUser",JSON.stringify(e))},C=function(){return JSON.parse(localStorage.getItem("loggedBlogAppUser"))},L=function(){return localStorage.removeItem("loggedBlogAppUser")},I="/api/blogs",N=function(){return{headers:{Authorization:"bearer ".concat(C().token)}}},B={getAll:function(){return k.a.get(I).then((function(e){return e.data}))},create:function(){var e=Object(w.a)(y.a.mark((function e(t,n){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"bearer ".concat(n)}},e.next=3,k.a.post(I,t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),update:function(e){return k.a.put("".concat(I,"/").concat(e.id),e,N()).then((function(e){return e.data}))},remove:function(e){return k.a.delete("".concat(I,"/").concat(e),N()).then((function(e){return e.data}))},createComment:function(){var e=Object(w.a)(y.a.mark((function e(t,n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("".concat(I,"/").concat(n.id,"/comments"),{comment:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},T=function(){return function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(){return k.a.get("/api/users").then((function(e){return e.data}))},A=function(e){return{type:"LOGIN",data:e}},G=n(17),_=n(7),R=function(){var e=Object(o.c)((function(e){return e.blogs}));return e.sort((function(e,t){return t.likes-e.likes})),c.a.createElement("div",null,c.a.createElement("h2",null,"Blogs"),e.map((function(e){return c.a.createElement("div",{key:e.id},c.a.createElement(G.b,{to:"/blogs/".concat(e.id)},e.title," By ",e.author))})))},U=n(16),M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";return function(){var n=Object(w.a)(y.a.mark((function n(r){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:"SET_NOTIFICATION",data:{message:e,type:t}}),a&&clearTimeout(a),a=setTimeout((function(){r({type:"CLEAR_NOTIFICATION"})}),5e3);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},P=n(24),W=n(30),D=function(){var e=Object(o.b)(),t=Object(r.useState)(""),n=Object(U.a)(t,2),a=n[0],l=n[1],u=Object(r.useState)(""),i=Object(U.a)(u,2),s=i[0],m=i[1],d=Object(r.useState)(""),f=Object(U.a)(d,2),p=f[0],E=f[1],b=Object(o.c)((function(e){return e.user}));return c.a.createElement("div",null,c.a.createElement("h4",null,"New Blog"),c.a.createElement(P.a,{onSubmit:function(t){t.preventDefault();var n={title:a,author:s,url:p};e(function(e,t){return function(){var n=Object(w.a)(y.a.mark((function n(a){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B.create(e,t);case 2:r=n.sent,a({type:"NEW_BLOG",data:r});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(n,b.token)),e(M("sd"),"danger"),e(M("".concat(n.title," Created!"))),l(""),m(""),E("")}},c.a.createElement(P.a.Group,null,c.a.createElement(P.a.Label,null,"Author"),c.a.createElement(P.a.Control,{type:"text",placeholder:"Enter Author",style:{width:"30vw"},id:"author",value:s,onChange:function(e){var t=e.target;return m(t.value)}})),c.a.createElement(P.a.Group,null,c.a.createElement(P.a.Label,null,"Title"),c.a.createElement(P.a.Control,{type:"text",placeholder:"Enter Author",style:{width:"30vw"},id:"title",value:a,onChange:function(e){var t=e.target;return l(t.value)}})),c.a.createElement(P.a.Group,null,c.a.createElement(P.a.Label,null,"URL"),c.a.createElement(P.a.Control,{type:"text",placeholder:"Enter Author",style:{width:"30vw"},id:"url",value:p,onChange:function(e){var t=e.target;return E(t.value)}}),c.a.createElement(W.a,{style:{width:"30vw",marginTop:"10px"},variant:"primary",type:"submit"},"Submit"))))},F={login:function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},J=n(65),V=n(66),z=function(){var e=Object(r.useState)(""),t=Object(U.a)(e,2),n=t[0],a=t[1],l=Object(r.useState)(""),u=Object(U.a)(l,2),i=u[0],s=u[1],m=Object(o.b)(),d=function(){var e=Object(w.a)(y.a.mark((function e(t){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,F.login({username:n,password:i});case 4:r=e.sent,a(""),s(""),m(A(r)),m(M("".concat(r.name," welcome back!"))),x(r),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),m(M("wrong username/password","error")),a(""),s("");case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(J.a,null,c.a.createElement("h2",{style:{textAlign:"center",marginBottom:"30px"}},"Login to Blog App"),c.a.createElement(V.a,{className:"justify-content-md-center"},c.a.createElement(P.a,{onSubmit:d},c.a.createElement(P.a.Group,null,c.a.createElement(P.a.Label,null,"Username"),c.a.createElement(P.a.Control,{placeholder:"Enter username",value:n,onChange:function(e){var t=e.target;return a(t.value)}})),c.a.createElement(P.a.Group,{controlId:"formBasicPassword"},c.a.createElement(P.a.Label,null,"Password"),c.a.createElement(P.a.Control,{type:"password",placeholder:"Password",value:i,onChange:function(e){var t=e.target;return s(t.value)}})),c.a.createElement(W.a,{className:"my-auto",type:"submit"},"Login"))))},H=n(72),K=function(){var e=Object(o.c)((function(e){return e.notification}));if(!e)return null;var t=e.type;return c.a.createElement(H.a,{variant:t},e.message)},q=c.a.forwardRef((function(e,t){var n=Object(r.useState)(!1),a=Object(U.a)(n,2),l=a[0],u=a[1],o={display:l?"none":""},i={display:l?"":"none"},s=function(){u(!l)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:s}})),c.a.createElement("div",null,c.a.createElement("div",{style:o},c.a.createElement(W.a,{style:{width:"30vw"},onClick:s},e.buttonLabel)),c.a.createElement("div",{style:i,className:"togglableContent"},e.children,c.a.createElement(W.a,{style:{width:"30vw"},variant:"danger",onClick:s},"Cancel")))}));q.displayName="Togglable";var Q=q,X=function(){var e=Object(o.c)((function(e){return e.users}));return c.a.createElement("div",null,c.a.createElement("h2",null,"Users"),e.map((function(e){return c.a.createElement("div",{key:e.id},c.a.createElement(G.b,{to:"/users/".concat(e.id)},e.name," "),"Has Added ",e.blogs.length," ",1===e.blogs.length?"Blog":"Blogs")})))},Y=function(){var e=Object(_.f)().id,t=Object(o.c)((function(e){return e.users})).find((function(t){return t.id===e}));return t?c.a.createElement("div",null,c.a.createElement("h3",null,t.name),c.a.createElement("h4",null,t.name.split(" ")[0]||"","'s Blogs"),0===t.blogs.length?c.a.createElement("h6",null,"No blogs added yet.."):null,c.a.createElement("ul",null,t.blogs.map((function(e){return c.a.createElement("li",{key:e.id},e.title)})))):null},Z=n(107),$=n(108),ee=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.user})),n=Object(o.c)((function(e){return e.blogs})),a=Object(_.f)().id,l=n.find((function(e){return e.id===a})),u=Object(r.useState)(""),i=Object(U.a)(u,2),s=i[0],m=i[1];if(Object(r.useEffect)((function(){e(T())}),[e]),!l)return null;return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(Z.a,{style:{width:"18rem"}},c.a.createElement(Z.a.Body,null,c.a.createElement(Z.a.Title,null,l.title),c.a.createElement(Z.a.Subtitle,{className:"mb-2 text-muted"},"by ",l.author),c.a.createElement(Z.a.Text,null,c.a.createElement(Z.a.Link,{href:l.url},l.url),c.a.createElement("br",null),l.likes," ",1===l.likes?"Person":"People"," like this blog",c.a.createElement("br",null)),c.a.createElement(W.a,{onClick:function(){e(function(e){return function(){var t=Object(w.a)(y.a.mark((function t(n){var a,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(g.a)(Object(g.a)({},e),{},{likes:e.likes+1}),t.next=3,B.update(a);case 3:r=t.sent,n({type:"LIKE_BLOG",data:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(l)),e(M("".concat(l.title," Liked!")))},style:{margin:"5px"}},"Like Blog"),t.id===l.user.id&&c.a.createElement(W.a,{variant:"danger",onClick:function(){e(function(e){return function(){var t=Object(w.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.remove(e.id);case 2:n({type:"REMOVE_BLOG",data:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(l)),e(M("".concat(l.title," Removed!")))}},"Remove Blog"),c.a.createElement("br",null))),c.a.createElement("div",null,c.a.createElement("br",null),c.a.createElement("h3",null,"Comments"),c.a.createElement(P.a,{onSubmit:function(t){t.preventDefault(),e(function(e,t){return function(){var n=Object(w.a)(y.a.mark((function n(a){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B.createComment(e,t);case 2:r=n.sent,a({type:"NEW_COMMENT",data:r});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(s,l)),e(M("Added comment - ".concat(s,"!"))),m("")}},c.a.createElement(P.a.Group,null,c.a.createElement(P.a.Control,{style:{width:"40vw"},type:"text",placeholder:"Enter Comment",onChange:function(e){return m(e.target.value)},value:s}),c.a.createElement(W.a,{type:"submit",style:{marginTop:"5px"}},"Add Comment"))),c.a.createElement($.a,null,l.comments.map((function(e,t){return c.a.createElement($.a.Item,{style:{border:"1px solid #ced4da"},key:t},e)}))))))},te=n(105),ne=n(106);var ae=function(){var e=Object(o.c)((function(e){return e.user})),t=Object(o.b)(),n=c.a.createRef();return Object(r.useEffect)((function(){t(T()),t(function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:return n=e.sent,e.abrupt("return",t({type:"INIT_USERS",data:n}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]),Object(r.useEffect)((function(){var e=C();e&&t(A(e))}),[t]),e?c.a.createElement(J.a,{className:"container"},c.a.createElement(G.a,null,c.a.createElement(J.a,null,c.a.createElement(te.a,{bg:"light"},c.a.createElement(te.a.Brand,{as:"h6"},"Blogger"),c.a.createElement(ne.a,{className:"mr-auto"},c.a.createElement(ne.a.Link,{as:"h6"},c.a.createElement(G.b,{to:"/blogs"},"Blogs ")),c.a.createElement(ne.a.Link,{as:"h6"},c.a.createElement(G.b,{to:"/users"},"Users"))),"Logged in as ".concat(e.name," "),c.a.createElement(W.a,{variant:"outline-danger",onClick:function(){t({type:"LOGOUT"}),L()}},"Logout")),c.a.createElement(K,null),c.a.createElement("br",null)),c.a.createElement(J.a,null,c.a.createElement(_.c,null,c.a.createElement(_.a,{path:"/users/:id"},c.a.createElement(Y,null)),c.a.createElement(_.a,{path:"/users"},c.a.createElement(Q,{buttonLabel:"Create A Blog",ref:n},c.a.createElement(D,null)),c.a.createElement("br",null),c.a.createElement(X,null)),c.a.createElement(_.a,{path:"/blogs/:id"},c.a.createElement(ee,null)),c.a.createElement(_.a,{path:"/"},c.a.createElement(Q,{buttonLabel:"Create A Blog",ref:n},c.a.createElement(D,null)),c.a.createElement("br",null),c.a.createElement(R,null)))))):c.a.createElement("div",null,c.a.createElement(K,null),c.a.createElement(z,null))};n(102);u.a.render(c.a.createElement(o.a,{store:h},c.a.createElement(ae,null)),document.getElementById("root"))},73:function(e,t,n){e.exports=n(103)}},[[73,1,2]]]);
//# sourceMappingURL=main.899eb32e.chunk.js.map